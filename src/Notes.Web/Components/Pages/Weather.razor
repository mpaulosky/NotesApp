@page "/weather"
@attribute [StreamRendering(true)]
@attribute [OutputCache(Duration = 5)]

@inject WeatherApiClient WeatherApi

<PageTitle>Weather</PageTitle>

<h1>Weather</h1>

<p>This component demonstrates showing data loaded from a backend API service.</p>

@if (forecasts == null)
{
	<p>
		<em>Loading...</em>
	</p>
}
else
{
	<table class="min-w-full divide-y divide-gray-200">
		<thead class="bg-gray-50">
		<tr>
			<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
			<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" aria-label="Temperature in Celsius">Temp. (C)</th>
			<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" aria-label="Temperature in Fahrenheit">Temp. (F)</th>
			<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Summary</th>
		</tr>
		</thead>
		<tbody class="bg-white divide-y divide-gray-200">
		@foreach (var forecast in forecasts)
		{
			<tr>
				<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">@forecast.Date.ToShortDateString()</td>
				<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">@forecast.TemperatureC</td>
				<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">@forecast.TemperatureF</td>
				<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">@forecast.Summary</td>
			</tr>
		}
		</tbody>
	</table>
}

@code {

	private WeatherForecast[]? forecasts;

	protected override async Task OnInitializedAsync()
	{
		forecasts = await WeatherApi.GetWeatherAsync();
	}

}
